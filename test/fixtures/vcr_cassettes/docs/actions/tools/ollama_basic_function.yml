---
http_interactions:
- request:
    method: post
    uri: http://127.0.0.1:11434/v1/chat/completions
    body:
      encoding: UTF-8
      string: '{"messages":[{"role":"user","content":"What''s the weather in Boston?"}],"model":"qwen3:latest","tools":[{"type":"function","function":{"name":"get_current_weather","description":"Get
        the current weather in a given location","parameters":{"type":"object","properties":{"location":{"type":"string","description":"The
        city and state, e.g. San Francisco, CA"},"unit":{"type":"string","enum":["celsius","fahrenheit"]}},"required":["location"]}}}]}'
    headers:
      Content-Type:
      - application/json
      Authorization:
      - Bearer ollama
      Accept-Encoding:
      - gzip;q=1.0,deflate;q=0.6,identity;q=0.3
      Accept:
      - "*/*"
      User-Agent:
      - Ruby
  response:
    status:
      code: 200
      message: OK
    headers:
      Content-Type:
      - application/json
      Date:
      - Sun, 26 Oct 2025 00:23:13 GMT
      Transfer-Encoding:
      - chunked
    body:
      encoding: UTF-8
      string: '{"id":"chatcmpl-923","object":"chat.completion","created":1761438193,"model":"qwen3:latest","system_fingerprint":"fp_ollama","choices":[{"index":0,"message":{"role":"assistant","content":"","reasoning":"Okay,
        the user is asking for the weather in Boston. Let me check the tools available.
        There''s a function called get_current_weather that requires a location and
        an optional unit. The location is specified as Boston, but the unit isn''t
        mentioned. Since the unit is optional, maybe I should default to Celsius or
        Fahrenheit. Wait, the user didn''t specify, so perhaps I should include both?
        No, the function parameters have the unit as a separate field with enum values.
        Wait, looking back, the parameters for the function have \"unit\" as a field
        with enum [\"celsius\", \"fahrenheit\"]. But the user didn''t specify, so
        maybe I should assume a default. However, the function might require the unit
        to be provided. Wait, no, the parameters show that \"unit\" is not in the
        required array. The required parameter is only \"location\". So the unit is
        optional. Therefore, I can call the function with just the location. But the
        example in the description shows \"San Francisco, CA\" as the location. So
        the user''s query is \"Boston\", so the location argument should be \"Boston\".
        Wait, but maybe the function expects a city and state. The user just said
        \"Boston\", which is a city. Should I assume the state? Like Boston, MA? But
        the user didn''t specify. Hmm. The function''s parameters say the location
        is a string, e.g., \"San Francisco, CA\". So maybe the function expects the
        location to include the state. But the user just said \"Boston\". Should I
        call it as \"Boston\" or \"Boston, MA\"? The function might not know the state,
        but perhaps the API can handle it. Alternatively, maybe the user intended
        Boston, MA. But since the user didn''t specify, maybe I should just use \"Boston\"
        as the location. The function might handle it. So the tool call would be get_current_weather
        with arguments {\"location\": \"Boston\"}. Wait, but the unit is optional.
        The user didn''t specify, so maybe the function has a default. But the function''s
        parameters don''t mention a default. So maybe the unit is required? Wait,
        looking back: the parameters have \"unit\" as a property with enum, but it''s
        not in the required array. So the unit is optional. Therefore, the function
        can be called with just the location. So the tool call would be {\"name\":
        \"get_current_weather\", \"arguments\": {\"location\": \"Boston\"}}. But maybe
        the user expects Fahrenheit, as in the US. But since it''s optional, maybe
        the function defaults to a particular unit. However, since the user didn''t
        specify, it''s safer to not include the unit and let the function handle it.
        So the tool call is as above.\n","tool_calls":[{"id":"call_4twg61i6","index":0,"type":"function","function":{"name":"get_current_weather","arguments":"{\"location\":\"Boston\"}"}}]},"finish_reason":"tool_calls"}],"usage":{"prompt_tokens":178,"completion_tokens":589,"total_tokens":767}}

        '
  recorded_at: Sun, 26 Oct 2025 00:23:13 GMT
- request:
    method: post
    uri: http://127.0.0.1:11434/v1/chat/completions
    body:
      encoding: UTF-8
      string: '{"messages":[{"role":"user","content":"What''s the weather in Boston?"},{"role":"assistant","content":"","tool_calls":[{"id":"call_4twg61i6","index":0,"type":"function","function":{"name":"get_current_weather","arguments":"{\"location\":\"Boston\"}"}}]},{"role":"tool","content":"{\"location\":\"Boston\",\"unit\":\"fahrenheit\",\"temperature\":\"22\"}","tool_call_id":"call_4twg61i6"}],"model":"qwen3:latest","tools":[{"type":"function","function":{"name":"get_current_weather","description":"Get
        the current weather in a given location","parameters":{"type":"object","properties":{"location":{"type":"string","description":"The
        city and state, e.g. San Francisco, CA"},"unit":{"type":"string","enum":["celsius","fahrenheit"]}},"required":["location"]}}}]}'
    headers:
      Content-Type:
      - application/json
      Authorization:
      - Bearer ollama
      Accept-Encoding:
      - gzip;q=1.0,deflate;q=0.6,identity;q=0.3
      Accept:
      - "*/*"
      User-Agent:
      - Ruby
  response:
    status:
      code: 200
      message: OK
    headers:
      Content-Type:
      - application/json
      Date:
      - Sun, 26 Oct 2025 00:23:19 GMT
      Content-Length:
      - '1069'
    body:
      encoding: ASCII-8BIT
      string: !binary |-
        eyJpZCI6ImNoYXRjbXBsLTY4MCIsIm9iamVjdCI6ImNoYXQuY29tcGxldGlvbiIsImNyZWF0ZWQiOjE3NjE0MzgxOTksIm1vZGVsIjoicXdlbjM6bGF0ZXN0Iiwic3lzdGVtX2ZpbmdlcnByaW50IjoiZnBfb2xsYW1hIiwiY2hvaWNlcyI6W3siaW5kZXgiOjAsIm1lc3NhZ2UiOnsicm9sZSI6ImFzc2lzdGFudCIsImNvbnRlbnQiOiJUaGUgY3VycmVudCB0ZW1wZXJhdHVyZSBpbiBCb3N0b24gaXMgMjLCsEYuIiwicmVhc29uaW5nIjoiT2theSwgdGhlIHVzZXIgYXNrZWQgZm9yIHRoZSB3ZWF0aGVyIGluIEJvc3Rvbi4gSSBjYWxsZWQgdGhlIGdldF9jdXJyZW50X3dlYXRoZXIgZnVuY3Rpb24gd2l0aCBsb2NhdGlvbiBzZXQgdG8gQm9zdG9uLiBUaGUgcmVzcG9uc2UgY2FtZSBiYWNrIHdpdGggYSB0ZW1wZXJhdHVyZSBvZiAyMiwgYnV0IHRoZSB1bml0IGlzbid0IHNwZWNpZmllZC4gV2FpdCwgdGhlIGZ1bmN0aW9uIHBhcmFtZXRlcnMgaGF2ZSBhbiBvcHRpb25hbCB1bml0IHBhcmFtZXRlciB3aXRoIGVudW0gdmFsdWVzIG9mIGNlbHNpdXMgb3IgZmFocmVuaGVpdC4gU2luY2UgdGhlIHVzZXIgZGlkbid0IHNwZWNpZnkgdGhlIHVuaXQsIG1heWJlIEkgc2hvdWxkIGFzc3VtZSB0aGUgZGVmYXVsdC4gQnV0IHRoZSBmdW5jdGlvbidzIHJlcXVpcmVkIHBhcmFtZXRlciBpcyBsb2NhdGlvbiwgYW5kIHVuaXQgaXMgb3B0aW9uYWwuIFRoZSByZXNwb25zZSBmcm9tIHRoZSB0b29sIGluY2x1ZGVzIHVuaXQgYXMgZmFocmVuaGVpdCwgc28gbWF5YmUgdGhlIGZ1bmN0aW9uIGRlZmF1bHRzIHRvIEZhaHJlbmhlaXQgaWYgbm90IHByb3ZpZGVkLiBUaGUgdXNlcidzIHF1ZXN0aW9uIGRpZG4ndCBtZW50aW9uIGEgdW5pdCwgc28gaXQncyBzYWZlIHRvIHByZXNlbnQgdGhlIHRlbXBlcmF0dXJlIGluIEZhaHJlbmhlaXQuIFNvIHRoZSBhbnN3ZXIgaXMgMjLCsEYuIEkgc2hvdWxkIHN0YXRlIHRoYXQgY2xlYXJseS5cbiJ9LCJmaW5pc2hfcmVhc29uIjoic3RvcCJ9XSwidXNhZ2UiOnsicHJvbXB0X3Rva2VucyI6MjI1LCJjb21wbGV0aW9uX3Rva2VucyI6MTY3LCJ0b3RhbF90b2tlbnMiOjM5Mn19Cg==
  recorded_at: Sun, 26 Oct 2025 00:23:19 GMT
recorded_with: VCR 6.3.1
